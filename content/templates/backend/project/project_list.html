{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load mytags %}
<<<<<<< HEAD


=======
{% load materializecss %}
>>>>>>> fe2a26e4575ced905d0d77fab990db3389ec3bc8
{% block content %}


    <!-- Main content Start -->



    <div class="row">

        <div class="col s12 m12 l12 project_list_container">
            <div  class="button_left" >
                {% if user.is_speaker %}
                    <a href="{% url 'answer_mission_list' %}" class="waves-effect waves-light btn secondary_button">{% trans 'answers_board' %}</a>
                {% elif user.is_student %}
                    <a href="{% url 'mission_list' %}" class="waves-effect waves-light btn secondary_button">{% trans 'my_mission_board' %}</a>
                {% endif %}
            </div>
            {% if user.is_speaker %}

                <div class="button_right ">
                    <!-- Modal Trigger -->
                    <a class="waves-effect waves-light btn modal-trigger" href="#add_project">{% trans 'add_project' %}</a>
                    <a class="waves-effect waves-light btn modal-trigger" href="#add_bulk_mission">{% trans 'add_mission' %}</a>
                </div>

                <h2 class="medium_title">{% trans 'my_projects'%}</h2>

                {% if user.profile.project_set.personal_projects.exists %}
                    <!-- <div class="my_table"> -->
                    <table class="project_list_table" >

                        <thead>
                        <tr class="table_headers">
                            <th>{% trans 'project_name_table_header' %}</th>
                            <th>{% trans 'team_attached' %}</th>
                            {#                        <th>{% trans 'field_table_header' %}</th>#}
                            <th>{% trans 'time_to_complete_table_header' %}</th>
                            <th>{% trans 'edit_p_table_header' %}</th>
                        </tr>

                        </thead>
                        <tbody>
                        {% for project in user.profile.project_set.personal_projects %}

                            <tr class="table_headers table_row table_column">
                                <td><a class= "link-table"href="{% url 'project_detail' project.id %}">{{project.name}}</a> </td>
                                 <td class="content_table inline">
                                    {% if not project.team %}
                                        <a class= "btn"href="{% url 'create_team_to_project' project.id %}">{% trans 'create_team' %}</a>
                                    {% else %}
                                        <a class= "link-table" href="{% url 'team_detail' project.team.id %}">{{ project.team.name }}</a>
                                        <a href="{% url 'update_team' project.team.id %}">  <i class="material-icons">edit</i></a></td>


                                    {% endif %}
                                </td>
                                {#                            <td>{% if not project.field.exists %}#}
                                {#                                {% trans 'no_fields' %}#}
                                {#                            {% else %}#}
                                {#                                {{project.field.name}}#}
                                {#                                {% endif %}#}
                                {#                            </td>#}
                                <td>{{project.time_to_complete}} {% trans 'in_days' %}</td>
                                <td class="speaker_btn_group">
                                    <a href="{% url 'update_project' project.id %}"> <i class="material-icons">edit</i></a>
                                    <a  href="{#   url 'duplicate_create_project' project.id team.id  #}"> <i class="material-icons">content_copy</i></a>
                                    <a href="{% url 'delete_project' project.id %}" > <i class="small material-icons delete garbege">{% trans 'delete' %}</i></a></td>

                            </tr>

                        {% endfor %}
                        </tbody>

                    </table>
                {% endif %}
                </div>





                </div>



                <!-- <div> -->

            {% elif user.is_student %}


                <div class="row">
                    <div class="col">
                        <!-- <h5 class="card-header" style="text-align:center; background-color:#425940; color:#fffefc;">{% trans 'available_project' %}</h5> -->


                        <div class="card">

                            <div class="my_table">
                                <table class="highlight centered">
                                    <thead>
                                    <tr class="table_headers">
                                        <th scope="col">{% trans 'project_name_table_header' %}</th>
                                        <th scope="col">{% trans 'speaker_table_header' %}</th>
                                        {#                                <th scope="col">{% trans 'field_table_header' %}</th>#}
                                        <th scope="col">{% trans 'time_to_complete_table_header' %}</th>
                                        <th scope="col">{% trans 'check_team' %}</th>


                                    </tr>
                                    </thead>

                                    <tbody>
                                    {% for project in available_projects %}
                                        <tr class="table_headers">
                                            <th scope="row"><a style = "color: black"  href="{% url 'project_detail' project.id %}">{{project.name}}</a></th>
                                            <td>{{project.speaker.user.first_name}}</td>
                                            {#                                    <td>{{project.field}}</td>#}


                                            <td>{{project.time_to_complete}}</td>
                                            <td> <a>Check Team </a> </td>

                                        </tr>
                                    {% endfor %}


                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- </main> -->
            {% endif %}







    <!-- Modal Structure -->
    <div id="add_project" class="modal project_list_modal">
        <div class="modal-content">

            <div class="row">

                <ul class="tabs project_create_button">
                    <li class="tab col 6"><a class="active" href="#create_project">{% trans 'create_project' %}</a></li>
                    <li class="tab col 6"><a href="#select_project">{% trans 'select_project' %}</a></li>

                </ul>

                <div id="create_project" class="col s12">
                    <form method="post" action="{% url 'create_project' %}">
                        {% csrf_token %}
                        {{ project_form|materializecss }}
                        <button type="submit">Save</button>
                    </form>

                </div>


                <div id="select_project" class="col 12">
                    <div class="col s12 m12 l12">
                        <h2 class="medium_title">{% trans 'template_project' %}</h2>

                        <table class="centered my_table" >
                            <thead>
                            <tr class="table_headers">
                                <th class="link-table" scope="col">{% trans 'project_name_table_header' %}</th>
                                <th class="link-table" scope="col">{% trans 'speaker_table_header' %}</th>
                                {#                            <th class="link-table" scope="col">{% trans 'field_table_header' %}</th>#}
                                <th class="link-table" scope="col">{% trans 'time_to_complete_table_header' %}</th>
                                <th class="link-table" scope="col">{% trans 'see_project' %}</th>
                                <th class="link-table" scope="col">{% trans 'speaker_select_project' %}</th>


                            </tr>
                            </thead>
                            <tbody>
                            {% for project in project_list %}
                                <tr class="table_headers">
                                    <td><a class= "link-table" href="{% url 'project_detail' project.id %}">{{project.name}}</a></td>
                                    <td>{{project.speaker.user.first_name}}</td>
                                    {#                                <td>{% if not project.field.exists %}#}
                                    {#                                {% trans 'no_fields' %}#}
                                    {#                            {% else %}#}
                                    {#                                {{project.field.name}}#}
                                    {#                                {% endif %}#}
                                    {#                            </td>#}
                                    <td>{{project.time_to_complete}} {% trans 'days' %}</td>
                                    <td> <a href="{% url 'project_detail' project.id %}"> <i class="material-icons">pageview</i> </a></td>
                                    <td> <a class= "link-table speaker_select_project" href="{% url 'chose_project_detail' project.id %}">{% trans 'speaker_select_project' %}</a> </td>
                                </tr>
                            {% endfor %}


                            </tbody>
                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>




    <div id="add_bulk_mission" class="modal">
        <div class="modal-content">

            <div class="row">
                <div class="col s12">
                    <ul class="tabs">

                        <li class="tab col s3"><a class="active" href="#bulk_individual_mission">{% trans 'bulk_individual_mission' %}</a></li>
                        <li class="tab col s3"><a href="#bulk_collective_mission">{% trans 'bulk_collective_mission' %}</a></li>

                    </ul>
                </div>
                <div id="bulk_individual_mission" class="col s12">

                    <div style="background-color: #0a0a0a">


                    </div>

                                        <form method="post" action="{% url 'bulk_add_individual_mission' %}">
                                            {% csrf_token %}
                                            {{ individual_form|materializecss }}
                                            {{ mission_bulk_form|materializecss }}

                                            <button type="submit">{% trans 'save' %}</button>
                                        </form>

                                    </div>

                                    <div id="bulk_collective_mission" class="col s12">
                                        <form method="post" action="{% url 'bulk_add_collective_mission' %}">
                                            {% csrf_token %}
                                            {{ mission_bulk_form|materializecss }}
                                             {{ individual_form|materializecss }}
                                            <button type="submit">{% trans 'save' %}</button>

                                        </form>


                </div>

            </div>


        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">{% trans 'close' %}</a>
        </div>
    </div>







{% endblock %}


{% block javascript %}

    <script>
        $(document).ready(function(){
            $('.modal').modal();

            $('.tabs').tabs();

            $('.collapsible').collapsible();

        });
    </script>

    <script src="{% static  'backend/js/project_api_details.js'%}" type="text/javascript"></script>
    <script src="{% static  'backend/js/plugin.js'%}" type="text/javascript"></script>

{% endblock javascript %}