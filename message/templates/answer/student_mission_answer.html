{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block css %}
    <link href="{% static 'backend/css/answer.css' %}" rel="stylesheet" >

{% endblock css %}



{% if user.profile == object.attributed_to %}

    <div class="answer_box">

    {% if object.answer.all.exists %}

        {% with answer=object.answer.all.last %}


            <div class="last_answer_container">
                <label class="last_answer_label">{% trans 'your_last_answer' %}</label>
                <br>
                {{ answer.response_comment }}<br>
                {{ answer.response_file }}


                <label style="font-weight: bold">{% trans 'status' %}: {{ object.answer.get_status_display }}</label>

            </div>


            {% if answer.status %}
                <div class="answer_status_view_student">


                <p> {% trans 'answer_status' %}: {{ answer.get_status_display }} </p>
                {% if answer.grade %}
                    {% trans 'and_graded :' %}
                    {{ answer.grade }}


                {% elif answer.status == 'a' %}
                    {% if not answer.grade %}

                        <p>{% trans 'mission_not_graded' %}</p>
                    {% else %}
                        {% trans 'grade_for_mission ' %}: {{ answer.grade }}
                    {% endif %}

                {% else %}

                    <p> {% trans 'mission_wasnt_accepted_yet' %}</p>
                {% endif %}


            {% endif %}
        {% endwith %}

    </div>


        <div class=""><span>{{answer.response_comment}}</span>

    {% else %}

        <label> {% trans 'no_answered_yet' %}</label>
        <form method="POST" action = "{% url 'answer_add' %}?next={{ request.path }} " enctype="multipart/form-data" >
            {% csrf_token %}


            {{ object.answer_form|crispy }}


            <button class="btn" type="submit" name="action">{% trans 'save_answer' %}
            </button>
        </form>
    {% endif %}
</div>
    </div>

{% endif %}




